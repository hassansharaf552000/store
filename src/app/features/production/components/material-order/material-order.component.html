<p-card>
  <div class="header-section">
    <button pButton 
            icon="pi pi-arrow-right" 
            class="p-button-text back-button" 
            (click)="goBack()">
    </button>
    <h2>استلام المواد</h2>
  </div>

  <div class="receipt-details" *ngIf="materialOrder">
    <div class="p-grid">
      <div class="p-col-6">
        <p><strong>رقم الإيصال:</strong> {{materialOrder.receiptNumber}}</p>
        <p><strong>رقم أمر الشراء:</strong> {{materialOrder.purchaseOrderId}}</p>
        <p><strong>المورد:</strong> {{materialOrder.supplier}}</p>
      </div>
      <div class="p-col-6">
        <p><strong>التاريخ:</strong> {{materialOrder.receivedDate | date}}</p>
        <p><strong>الحالة:</strong> 
          <p-tag [severity]="'success'" value="تم الاستلام"></p-tag>
        </p>
      </div>
    </div>

    <div class="items-section">
      <p-table [value]="materialOrder.items">
        <ng-template pTemplate="header">
          <tr>
            <th>اسم المادة</th>
            <th>الوحدة</th>
            <th class="text-right">الكمية</th>
            <th class="text-right">سعر الوحدة</th>
            <th class="text-right">المجموع</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
          <tr>
            <td>{{item.itemName}}</td>
            <td>{{item.unit}}</td>
            <td class="text-right">{{item.quantity}}</td>
            <td class="text-right">{{item.unitPrice | currency:'SAR'}}</td>
            <td class="text-right">{{item.total | currency:'SAR'}}</td>
          </tr>
        </ng-template>
        <ng-template pTemplate="footer">
          <tr>
            <td colspan="4" class="text-right"><strong>المبلغ الإجمالي:</strong></td>
            <td class="text-right"><strong>{{materialOrder.totalAmount | currency:'SAR'}}</strong></td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</p-card>
