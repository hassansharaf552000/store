<div class="add-inventory-container">
  <div class="header">
    <a *ngIf="isEditMode" 
       class="back-link" 
       (click)="onBack()">
      <i class="pi pi-arrow-right"></i>
      العودة للمواد الخام
    </a>
    <h2 class="mt-3">{{pageTitle}}</h2>
    <p>{{pageSubTitle}}</p>
  </div>

  <form [formGroup]="inventoryForm" (ngSubmit)="onSubmit()" class="inventory-form">
    <div class="form-group">
      <label for="name">اسم المادة الخام</label>
      <input 
        id="name"
        type="text"
        pInputText
        formControlName="name"
        placeholder="أدخل اسم المادة الخام"
      >
      <small class="error" *ngIf="inventoryForm.get('name')?.errors?.['required'] && inventoryForm.get('name')?.touched">
        هذا الحقل مطلوب
      </small>
      <small class="error" *ngIf="inventoryForm.get('name')?.errors?.['maxlength']">
        يجب ألا يتجاوز الاسم 100 حرف
      </small>
    </div>

    <div class="form-group">
      <label for="unit">وحدة القياس</label>
      <select
        id="unit"
        formControlName="unit"
        class="form-select"
      >
        <option value="">اختر وحدة القياس</option>
        <option *ngFor="let unit of units" [value]="unit.code">
          {{unit.name}}
        </option>
      </select>
      <small class="error" *ngIf="inventoryForm.get('unit')?.invalid && inventoryForm.get('unit')?.touched">
        يرجى اختيار وحدة القياس
      </small>
    </div>

    <div class="form-group">
      <label for="unit_count">الكمية</label>
      <p-inputNumber
        id="unit_count"
        formControlName="unit_count"
        [min]="0"
        [max]="2147483647"
        [showButtons]="true"
        placeholder="أدخل الكمية"
        [style]="{'width':'100%'}"
      ></p-inputNumber>
      <small class="error" *ngIf="inventoryForm.get('unit_count')?.errors?.['required'] && inventoryForm.get('unit_count')?.touched">
        يرجى إدخال الكمية
      </small>
      <small class="error" *ngIf="inventoryForm.get('unit_count')?.errors?.['min'] || inventoryForm.get('unit_count')?.errors?.['max']">
        يجب أن تكون الكمية بين 0 و 2147483647
      </small>
    </div>

    <div class="form-actions d-flex justify-content-end gap-3">
      <button 
        pButton 
        type="submit" 
        [label]="submitButtonLabel"
        [disabled]="inventoryForm.invalid"
      ></button>
    </div>
  </form>
</div>

<p-toast position="top-center"></p-toast>
